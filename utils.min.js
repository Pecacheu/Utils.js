//Utils.js v8.3.5_ES5 https://github.com/Pecacheu/Utils.js GNU GPL v3.0
"use strict";var utils={};function UtilRect(t,e,n,i){if(!(this instanceof UtilRect))throw"UtilRect constructor must use new keyword!";var r=Number.isFinite,s=0,o=0,u=0,l=0;r(t)&&r(e)&&r(n)&&r(i)?(s=t,o=e,u=n,l=i):t instanceof ClientRect&&(s=t.top,o=t.bottom,u=t.left,l=t.right),utils.define(this,["top","y"],function(){return s},function(t){r(t)&&(s=t)}),utils.define(this,"bottom",function(){return o},function(t){r(t)&&(o=t)}),utils.define(this,["left","x"],function(){return u},function(t){r(t)&&(u=t)}),utils.define(this,"right",function(){return l},function(t){r(t)&&(l=t)}),utils.define(this,"width",function(){return l-u},function(t){r(t)&&(t<0&&(t=0),l=u+t)}),utils.define(this,"height",function(){return o-s},function(t){r(t)&&(t<0&&(t=0),o=s+t)})}window.ClientRect||(window.ClientRect=DOMRect),UtilRect.prototype.contains=function(t,e){return t instanceof UtilRect||t instanceof ClientRect?t.left>=this.left&&t.right<=this.right&&t.top>=this.top&&t.bottom<=this.bottom:t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},UtilRect.prototype.expand=function(t){return this.top-=t,this.left-=t,this.bottom+=t,this.right+=t,this},String.prototype.startsWith||(String.prototype.startsWith=function(t,e){var n=e>0?0|e:0;return this.substring(n,n+t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return(void 0===e||e>this.length)&&(e=this.length),this.substring(e-t.length,e)===t}),function(){utils.setCookie=function(t,e,n,i){var r=encodeURIComponent(t)+"="+(null==e?"":encodeURIComponent(e));null!=n&&(n instanceof Date||(n=new Date(n)),r+=";expires="+n.toUTCString()),i&&(r+=";secure"),document.cookie=r},utils.remCookie=function(t){document.cookie=encodeURIComponent(t)+"=;expires="+new Date(0).toUTCString()},utils.getCookie=function(t){for(var e,n,i,r=encodeURIComponent(t),s=" "+r,o=document.cookie.split(";"),u=0,l=o.length;u<l;u++)if(n=(e=o[u]).indexOf("="),(i=e.substr(0,n))==r||i==s)return decodeURIComponent(e.substr(n+1));return null},Function.prototype.wrap=function(){var t=this,e=arguments;return function(){return t.apply(arguments,e)}},utils.copy=function(t,e){if(!t||"object"!=typeof t)return t;for(var n,i={},r=Object.keys(t),s=0,o=r.length;s<o;s++)i[n=r[s]]=!1===e?t[n]:utils.copy(t[n]);return i},utils.deviceInfo=function(t){t||(t=navigator.userAgent);var e={};if(!t.startsWith("Mozilla/5.0 "))return e;var n=t.indexOf(")"),i=t.indexOf(" ",n+2),r=t.indexOf(")",i+1);r=-1==r?i+1:r+2;var s=e.rawOS=t.substring(13,n);if(s.startsWith("Windows NT ")){e.os="Windows";var o=s.indexOf(";",12),u=s.indexOf(";",o+1)+2,l=s.indexOf(";",u);e.type=s.substring(u,-1==l?void 0:l)+" PC",e.version=s.substring(11,o).replace(/.0$/,"")}else if(s.startsWith("Linux; Android ")){e.os="Android";var a=s.indexOf(";",16);l=s.indexOf(" Build",a+3);e.type=s.substring(a+2,-1==l?void 0:l),e.version=s.substring(15,a).replace(/.0$/,"")}else if(s.startsWith("iPhone; CPU iPhone OS "))e.os="iOS",e.type="iPhone",e.version=s.substring(22,s.indexOf(" ",23)).replace(/_/g,".");else if(s.startsWith("Macintosh; Intel Mac OS X "))e.os="MacOS",e.type="Macintosh",e.version=s.substr(26).replace(/_/g,".");else if(s.startsWith("X11; ")){a=s.indexOf(";",6),u=s.indexOf(";",a+3);e.os="Linux "+s.substring(5,a),e.type=s.substring(a+2,u),e.version=s.substr(u+5)}return e.engine=t.substring(n+2,i),e.browser=t.substring(r),e.mobile=!!t.match(/Mobi/i),e},utils.device=utils.deviceInfo(),utils.mobile="orientation"in window||utils.device.mobile,utils.skinnedInput=function(t){var e=utils.mkDiv(null,t.className),n=t.style,i=t.type;if(t.className+=" isSub","datetime-local"==i||"select-one"==i||"select-multiple"==i){n.opacity=0,n.top="-100%",t.siT=utils.mkEl("span",e,"isText"),utils.mkEl("span",e,"isArrow",{borderTopColor:getComputedStyle(t).color});var r=function(){switch(this.type){case"datetime-local":this.siT.textContent=utils.formatDate(utils.fromDateTimeBox(this));break;case"select-one":this.siT.textContent=-1!=(t=this.options).selectedIndex?t[t.selectedIndex].label:"No Options Selected";break;case"select-multiple":this.siT.textContent=function(t){for(var e=t.options,n="",i=0,r=e.length;i<r;i++)e[i].selected&&(n+=(n?", ":"")+e[i].label);return n||"No Options Selected"}(this)}var t}.bind(t);t.addEventListener("change",r),t.forceUpdate=r,r()}t.replaceWith(e),e.appendChild(t),document.isStyles||(document.isStyles=!0,utils.mkEl("style",document.body,null,null,".isSub {\t\twidth:100% !important; height:100% !important; border:none !important; display:inline-block !important;\t\tposition:relative !important; box-shadow:none !important; margin:0 !important; padding:initial !important;\t}\t.isText {\t\tdisplay:inline-block; height:100%; max-width:95%;\t\toverflow:hidden; text-overflow:ellipsis; white-space:nowrap;\t}\t.isArrow {\t\twidth:0; height:0; display:inline-block; float:right; top:38%; position:relative;\t\tborder-left:3px solid transparent; border-right:3px solid transparent;\t\tborder-top:6px solid #000; vertical-align:middle;\t}"))},utils.numField=function(t,e,n,i){null==e&&(e=-2147483648),null==n&&(n=2147483647),t.setAttribute("pattern","\\d*"),t.type=i?"tel":"number",t.ns=t.value=(t.num=Number(t.value)||0).toString(),t.onkeydown=function(t){var r=t.key,s=1==r.length?Number(r):null,o=i&&this.num!=n&&this.num!=e,u=this.ns,l=this.ns.length,a=this.ns.indexOf("."),c=-1!=this.ns.indexOf("-");s||0==s?(-1==a||l-a<i+1)&&(this.ns+=r):!o||"."!=r&&"*"!=r||-1!=a?"Backspace"==r||"Delete"==r?this.ns=this.ns.substr(0,l-1):e<0&&("-"==r||"#"==r)&&0==l?(this.ns="-",c=!0):"ArrowUp"==r?this.ns=(this.num+(this.step||1)).toString():"ArrowDown"==r&&(this.ns=(this.num-(this.step||1)).toString()):this.ns+=".",l=this.ns.length,-1!=(a=this.ns.indexOf("."))&&l-a>i+1&&(l=(this.ns=this.ns.substr(0,a+i+1)).length);var f=Number(this.ns)||0;f||-1!=a||c||(this.ns=""),f>n?(f=n,this.ns=f.toString()):f<e&&(f=e,this.ns=f.toString());var h=this.num;this.num=f,this.onnuminput&&!1===this.onnuminput(f)?(this.ns=u,this.num=h):this.value=l?(c&&!f?"-":"")+f+(-1!=a&&f%1==0?".0":""):f,t.preventDefault()},t.set=function(t){t=Number(t)||0,i||(t=Math.floor(t)),t>n&&(t=n),t<e&&(t=e),this.value=this.num=t,this.ns=t.toString(),this.onnuminput&&this.onnuminput(t)}},utils.costField=function(t,e){t.setAttribute("pattern","\\d*"),t.type="tel",t.value=utils.formatCost(t.num=Number(t.value)||0,e),t.ns=t.num.toString(),t.onkeydown=function(t){var n=t.key,i=1==n.length?Number(n):null,r=this.ns.length,s=this.ns,o=this.ns.indexOf(".");i||0==i?(-1==o||r-o<3)&&(this.ns+=n):"."!=n&&"*"!=n||-1!=o?"Backspace"==n||"Delete"==n?this.ns=this.ns.substr(0,r-1):"ArrowUp"==n?this.ns=(this.num+1).toString():"ArrowDown"==n&&this.num>=1&&(this.ns=(this.num-1).toString()):(this.ns+=".",o=r);var u=Number(this.ns)||0;u||-1!=o||(this.ns="");var l=this.num;this.num=u,this.onnuminput&&!1===this.onnuminput(u)?(this.ns=s,this.num=l):this.value=utils.formatCost(u,e),t.preventDefault()},t.set=function(t){t=Math.floor(100*(Number(t)||0))/100,this.num=t,this.value=utils.formatCost(t,e),this.ns=t.toString(),this.onnuminput&&this.onnuminput(t)}},utils.formatCost=function(t,e){if(e||(e="$"),!t)return e+"0.00";var n=t.toFixed(2).split(".");return e+n[0].split("").reverse().reduce(function(t,e,n){return"-"==e?e+t:e+(!n||n%3?"":",")+t},"")+"."+n[1]},utils.fromDateTimeBox=function(t){var e=t.value;return e?new Date(e.replace(/-/g,"/").replace(/T/g," ")):new Date},utils.toDateTimeBox=function(t,n){return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+(n?":"+e(t.getSeconds()):"")};var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function e(t){return t<=9?"0"+t:t}function n(t){utils.onNav&&utils.onNav.call(null,t)}function i(t,e){for(;t>=e;)t-=e;return t}function r(){for(var t=document.styleSheets,e=0,n=t.length;e<n;e++)try{return t[e].rules,t[e]}catch(t){}var i=utils.mkEl("style",document.head);return i.appendChild(document.createTextNode("")),i.sheet}function s(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}utils.formatDate=function(n){if(null==n||!n.getDate||!n.getFullYear())return"Invalid Date";var i=n.getMinutes(),r=n.getMonth(),s=n.getDate(),o=n.getFullYear(),u=n.getHours(),l=!1;return u>=12&&(l=!0,u-=12),0==u&&(u=12),u+":"+e(i)+" "+(l?"PM":"AM")+" "+t[r]+" "+utils.suffix(s)+", "+o},utils.suffix=function(t){var e=t%10,n=t%100;return 1==e&&11!=n?t+"st":2==e&&12!=n?t+"nd":3==e&&13!=n?t+"rd":t+"th"},utils.goBack=function(){history.back()},utils.goForward=function(){history.forward()},utils.go=function(t,e){history.pushState(e,"",t||location.pathname),n(e)},window.addEventListener("popstate",function(t){n(t.state)}),window.addEventListener("load",function(){setTimeout(function(){n(history.state)},1)}),utils.mkEl=function(t,e,n,i,r){var s=document.createElement(t);if(null!=n&&(s.className=n),null!=r&&(s.innerHTML=r),null!=i&&"object"==typeof i){var o=Object.keys(i),u=o.length;for(r=0;r<u;r++)s.style[o[r]]=i[o[r]]}return null!=e&&e.appendChild(s),s},utils.mkDiv=function(t,e,n,i){return utils.mkEl("div",t,e,n,i)},utils.addText=function(t,e){t.appendChild(document.createTextNode(e))},utils.updateSize=function(){utils.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,utils.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},utils.textWidth=function(t,e){var n=(window.textWidthCanvas||(window.textWidthCanvas=document.createElement("canvas"))).getContext("2d");return n.font=e,n.measureText(t).width},utils.define=function(t,e,n,i){var r={};if(n&&(r.get=n),i&&(r.set=i),Array.isArray(e))for(var s=0,o=e.length;s<o;s++)Object.defineProperty(t,e[s],r);else Object.defineProperty(t,e,r)},Array.prototype.clean=function(t){for(var e,n=0,i=this.length;n<i;n++)e=this[n],(utils.isBlank(e)||!1===e||!t&&0===e)&&(this.splice(n,1),n--,i--);return this},Array.prototype.remove=function(t){var e=this.indexOf(t);return-1!=e&&(this.splice(e,1),!0)},utils.define(Element.prototype,"index",function(){var t=this.parentElement;return t?Array.prototype.indexOf.call(t.children,this):-1}),Element.prototype.insertChildAt=function(t,e){e<0&&(e=0),e>=this.children.length?this.appendChild(t):this.insertBefore(t,this.children[e])},utils.define(Element.prototype,"boundingRect",function(){return new UtilRect(this.getBoundingClientRect())}),Math.cot=function(t){return 1/Math.tan(t)},utils.isBlank=function(t){return null==t||("string"==typeof t?!/\S/.test(t):"object"==typeof t&&("number"==typeof t.length?0===t.length:0===Object.keys(t).length))},utils.firstEmpty=function(t){for(var e=t.length,n=0;n<e;n++)if(null==t[n])return n;return e},utils.firstEmptyChar=function(t){for(var e=Object.keys(t),n=e.length,i=0;i<n;i++)if(null==t[e[i]])return e[i];return utils.numToChar(n)},utils.numToChar=function(t){if(t<=25)return String.fromCharCode(t+97);if(t>=26&&t<=51)return String.fromCharCode(t+39);var e,n;if(t<2756)e=i(Math.floor(t/52)-1,52),n=i(t,52);else if(t<143364)e=i(Math.floor((t-52)/2704)-1,52),n=i(t-52,2704)+52;else{if(!(t<7454980))return!1;e=i(Math.floor((t-2756)/140608)-1,52),n=i(t-2756,140608)+2756}return utils.numToChar(e)+utils.numToChar(n)},utils.merge=function(t){for(var e,n,i,r=1,s=arguments.length;r<s;r++)for(var o in e=arguments[r]){if(n=t[o],i=e[o],n&&i){if(n.length>=0&&i.length>=0){for(var u=0,l=i.length,a=n.length;u<l;u++)n[u+a]=i[u];continue}if("object"==typeof n&&"object"==typeof i){for(var c in i)n[c]=i[c];continue}}t[o]=i}return t},utils.bounds=function(t,e,n){return null==e&&(e=0),null==n&&(n=1),t>=e?t<=n?t:n:e},utils.norm=utils.normalize=function(t,e,n){null==e&&(e=0),null==n&&(n=1);var i=Math.abs(n-e);if(t<e)for(;t<e;)t+=i;else for(;t>=n;)t-=i;return t},utils.cutStr=function(t,e){for(var n;-1!=(n=t.indexOf(e));)t=t.slice(0,n)+t.slice(n+e.length);return t},utils.dCut=function(t,e,n,i,r){var s=t.indexOf(e,r||void 0)+e.length,o=t.indexOf(n,s);return i&&(i.s=s,i.t=o),s<e.length||o<=s?"":t.substring(s,o)},utils.dCutLast=function(t,e,n,i,r){var s=t.lastIndexOf(e,r||void 0)+e.length,o=t.indexOf(n,s);return i&&(i.s=s,i.t=o),s<e.length||o<=s?"":t.substring(s,o)},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")}),utils.parseCSS=function(t){var e={},n="",i=0;function r(t){if(-1!==t.indexOf(",")){for(var e=utils.clean(t.split(",")),n=0,i=e.length;n<i;n++)e[n]=e[n].trim();return e}return t.trim()}for(t=t.trim();t.length>0;)if("("==t[0]&&-1!==t.indexOf(")")&&n){var s=t.indexOf(")"),o=t.substring(1,s);e[n]=r(o),n="",t=t.substring(s+1)}else if(0==t.search(/[#!\w]/)){n&&(e[i]=n,i++),-1==(s=t.search(/[^#!\w-%]/))&&(s=t.length),n=t.substring(0,s),t=t.substring(s)}else t=t.substring(1);return n&&(e[i]=n),e},utils.buildCSS=function(t){for(var e=Object.keys(t),n=e.length,i="",r=0;r<n;){var s=e[r],o=t[e[r]];r++,0<=Number(s)?i+=o+" ":i+=s+"("+o+") "}return i.substring(0,i.length-1)},utils.addClass=function(t,e){for(var n=r(),i=Object.keys(e),o="",u=0,l=i.length;u<l;u++)o+=s(i[u])+":"+e[i[u]]+";";n.addRule("."+t,o)},utils.addId=function(t,e){for(var n=r(),i=Object.keys(e),o="",u=0,l=i.length;u<l;u++)o+=s(i[u])+":"+e[i[u]]+";";n.addRule("#"+t,o)},utils.addKeyframe=function(t,e){r().addRule("@keyframes "+t,e)},utils.removeSelector=function(t){for(var e,n,i=0,r=document.styleSheets.length;i<r;i++){e=document.styleSheets[i];try{n=e.rules}catch(t){continue}for(var s in n)1==n[s].type&&n[s].selectorText==t&&e.removeRule(s)}},utils.hexToRgb=function(t){var e=parseInt(t.substr(1),16);return[e>>16&255,e>>8&255,255&e]},utils.rand=function(t,e,n,i){n||(n=1),e*=n,t*=n;var r=Math.random();return Math.round((i?i(r):r)*(e-t)+t)/n},utils.fromQuery=function(t){return t.startsWith("?")&&(t=t.substr(1)),0==t.length?{}:function t(e,n){var i=n[0],r=i.indexOf("="),s=decodeURIComponent(i.substr(0,r)),o=decodeURIComponent(i.substr(r+1));return null==e[s]?e[s]=o:"array"==typeof e[s]?e[s].push(o):e[s]=[e[s],o],1==n.length?e:t(e,n.slice(1))}({},t.split("&"))},utils.toQuery=function(t){var e="";if("object"!=typeof t)return encodeURIComponent(t);for(var n in t){var i=t[n];"object"==typeof i&&(i=JSON.stringify(i)),e+="&"+n+"="+encodeURIComponent(i)}return e.slice(1)},utils.center=function(t,e,n){if(t.style.position||(t.style.position="absolute"),"calc"==n)e&&"x"!=e||(t.style.left="calc(50% - "+t.clientWidth/2+"px)"),e&&"y"!=e||(t.style.top="calc(50% - "+t.clientHeight/2+"px)");else if("move"==n)e&&"x"!=e||(t.style.left=utils.width/2-t.clientWidth/2+"px"),e&&"y"!=e||(t.style.top=utils.height/2-t.clientHeight/2+"px");else if("trans"==n){var i=utils.cutStr(t.style.transform,"translateX(-50%)");i=utils.cutStr(i,"translateY(-50%)"),e&&"x"!=e||(t.style.left="50%",i+="translateX(-50%)"),e&&"y"!=e||(t.style.top="50%",i+="translateY(-50%)"),i&&(t.style.transform=i)}else{var r=document.createElement("div");t.parentNode.appendChild(r),r.style.display="table",r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.width="100%",r.style.height="100%",t.parentNode.removeChild(t),r.appendChild(t),t.style.display="table-cell",e&&"x"!=e||(t.style.textAlign="center"),e&&"y"!=e||(t.style.verticalAlign="middle"),t.style.position="relative"}},utils.loadAjax=function(t,e,n,i,r){var s;try{s=new XMLHttpRequest}catch(t){return e(t)}if(s.open(n||"GET",t),r)for(var o in r)s.setRequestHeader(o,r[o]);s.onreadystatechange=function(t){if(t.target.readyState===s.DONE){var n=t.target.status;200==n?n=0:n<=0&&(n=-2),e(n,t.target.response)}},s.send(i||void 0)},utils.loadFile=function(t,e,n){var i=document.createElement("object");i.data=t,i.style.position="fixed",i.style.opacity=0;var r=setTimeout(function(){i.remove(),r=null,e(!1)},n||4e3);i.onload=function(){r&&(clearTimeout(r),e(i.contentDocument.documentElement.outerHTML),i.remove())},document.body.appendChild(i)},utils.loadJSONP=function(t,e,n){var i=document.createElement("script"),r=utils.firstEmptyChar(utils.lJSONCall);i.type="application/javascript",i.src=t+(-1==t.indexOf("?")?"?":"&")+"callback=utils.lJSONCall."+r;var s=setTimeout(function(){delete utils.lJSONCall[r],e(!1)},n||4e3);utils.lJSONCall[r]=function(t){s&&clearTimeout(s),delete utils.lJSONCall[r],e(t)},document.head.appendChild(i),document.head.removeChild(i)},utils.lJSONCall=[],utils.dlFile=function(t,e,n){fetch(e).then(function(t){t.blob()}).then(function(e){utils.dlData(t,e),n&&n()}).catch(function(t){n&&n(t)})},utils.dlData=function(t,e){e instanceof Blob||(e=Blob(e));var n=URL.createObjectURL(e),i=utils.mkEl("a",document.body,null,{display:"none"});i.href=n,i.download=t,i.click(),i.remove(),URL.revokeObjectURL(n)},utils.deg=function(t){return 180*t/Math.PI},utils.rad=function(t){return t*Math.PI/180},utils.map=function(t,e,n,i,r,s){var o=(t-e)/(n-e);return(s?s(o):o)*(r-i)+i}}();var Easing={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};